

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Effective pedagogies for teaching data science &#8212; UBC JupyterDays 2020</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/mystnb.js"></script>
    <script src="../../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Jupyter and QuantEcon" href="../wu/Jupyter_and_QuantEcon.html" />
    <link rel="prev" title="Teaching in an online setting" href="../lee/teaching_online_jupyter_days.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../../index.html">
  
  
  <h1 class="site-logo" id="site-title">UBC JupyterDays 2020</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <p class="caption">
 <span class="caption-text">
  Schedule
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../schedule/day1.html">
   Day 1: Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../schedule/day2.html">
   Day 2: Pedagogy and Assessment
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../schedule/day3.html">
   Day 3: New Developments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../schedule/speakers.html">
   Speakers
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Day 1 Sessions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../ostblom/jupyterlab-intro.html">
   Introduction to JupyterLab
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../timbers/sharing-materials-with-git/sharing-materials-with-git.html">
   Sharing your teaching materials using Git &amp; GitHub
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../beuzen/jupyter_book_tutorial.html">
   Jupyter Book
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../walls/a_tour_of_python_packages_for_scientific_computing.html">
   Python packages for scientific computing
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Day 2 Sessions
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../timbers/canvas-speedgrader-jupyter/canvas-speedgrader-jupyter.html">
   Intro to using Canvas Speedgrader with Jupyter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../lee/teaching_online_jupyter_days.html">
   Teaching in an Online Setting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://firas.moosvi.com/books/active-learning-technologies/">
   Active learning with Jupyter Book
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Effective pedagogies for teaching data science
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Day 3 Sessions
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../wu/Jupyter_and_QuantEcon.html">
   Jupyter and QuantEcon
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../heagy/widgets-and-dashboards.html">
   Interactive exploration with Jupyter widgets and dashboards
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../boyce/interactive_online_course.html">
   Building an Interactive Online Course
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../kolhatkar/language-models-with-Jupyter.html">
   Computational linguistics with Jupyter
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Code of Conduct
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../../CODE_OF_CONDUCT.html">
   Code of Conduct for Jupyterdays
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/sessions/gelbart/ds-pedagogies.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/UBC-DSCI/jupyterdays"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/UBC-DSCI/jupyterdays/issues/new?title=Issue%20on%20page%20%2Fsessions/gelbart/ds-pedagogies.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        
        <a class="jupyterhub-button" href="https://ubc.syzygy.ca/jupyter/hub/user-redirect/git-pull?repo=https://github.com/UBC-DSCI/jupyterdays&urlpath=tree/jupyterdays/jupyterdays/sessions/gelbart/ds-pedagogies.ipynb&branch=master"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#about-me">
   About me
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#real-time-documents-10-min">
   Real-time documents (10 min)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#live-coding-in-jupyter-5-min">
   Live coding in Jupyter (5 min)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#problem-based-learning-20-min">
   Problem-based learning (20 min)
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example-canadian-cheese-dataset">
     Example: Canadian cheese dataset
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#another-quick-activity-before-the-break">
   Another quick activity before the break
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#break-5-10-min">
   Break (5-10 min)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sample-activity-decision-trees-20-min">
   Sample activity: decision trees (20 min)
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#think-pair-share-5-10-min-time-permitting">
   Think-pair-share (5-10 min, time permitting)
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cross-validation-true-false-questions">
     Cross-validation true/false questions
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#q-a-15-min">
   Q&amp;A (15 min)
  </a>
 </li>
</ul>

        </nav>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="effective-pedagogies-for-teaching-data-science">
<h1>Effective pedagogies for teaching data science<a class="headerlink" href="#effective-pedagogies-for-teaching-data-science" title="Permalink to this headline">¶</a></h1>
<p>Mike Gelbart</p>
<p>UBC Jupyter Days 2020</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.impute</span> <span class="kn">import</span> <span class="n">SimpleImputer</span>
<span class="kn">from</span> <span class="nn">sklearn.compose</span> <span class="kn">import</span> <span class="n">ColumnTransformer</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span><span class="p">,</span> <span class="n">OneHotEncoder</span><span class="p">,</span> <span class="n">FunctionTransformer</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>

<span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeClassifier</span><span class="p">,</span> <span class="n">export_graphviz</span>
<span class="kn">from</span> <span class="nn">sklearn.dummy</span> <span class="kn">import</span> <span class="n">DummyRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">Ridge</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">cross_validate</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">GridSearchCV</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;font.size&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">16</span>

<span class="kn">import</span> <span class="nn">re</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># To fix later, don&#39;t want to break the Jupyter Book</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">graphviz</span>
    <span class="n">graphviz_imported</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">graphviz_imported</span> <span class="o">=</span> <span class="kc">False</span>
    
<span class="k">def</span> <span class="nf">display_tree</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">tree</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; For binary classification only &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">graphviz_imported</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">dot</span> <span class="o">=</span> <span class="n">export_graphviz</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">out_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">feature_names</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">class_names</span><span class="o">=</span><span class="n">tree</span><span class="o">.</span><span class="n">classes_</span><span class="p">,</span><span class="n">impurity</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="c1"># adapted from https://stackoverflow.com/questions/44821349/python-graphviz-remove-legend-on-nodes-of-decisiontreeclassifier</span>
    <span class="n">dot</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;(</span><span class="se">\\\\</span><span class="s1">nsamples = [0-9]+)(</span><span class="se">\\\\</span><span class="s1">nvalue = \[[0-9]+, [0-9]+\])(</span><span class="se">\\\\</span><span class="s1">nclass = [A-Za-z0-9]+)&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">dot</span><span class="p">)</span>
    <span class="n">dot</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>     <span class="s1">&#39;(samples = [0-9]+)(</span><span class="se">\\\\</span><span class="s1">nvalue = \[[0-9]+, [0-9]+\])</span><span class="se">\\\\</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">dot</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">graphviz</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="n">dot</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Note to self: run these imports ^</p>
<p>In this session I will discuss a few tips for teaching data science, especially with Jupyter notebooks:</p>
<ul class="simple">
<li><p>Real-time collaborative documents (10 min)</p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Live_coding">Live coding</a> with Jupyter (5 min)</p></li>
<li><p><a class="reference external" href="https://www.queensu.ca/ctl/teaching-support/instructional-strategies/problem-based-learning">Problem-based learning</a> (20 min)</p></li>
<li><p>Break (5-10 min)</p></li>
<li><p>Sample activity: decision trees (20 min)</p></li>
<li><p>My implementation of <a class="reference external" href="https://en.wikipedia.org/wiki/Think-pair-share">think-pair-share</a> (5-10 min, time-permitting)</p></li>
<li><p>Q&amp;A (remaining time)</p></li>
</ul>
<div class="section" id="about-me">
<h2>About me<a class="headerlink" href="#about-me" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Assistant Professor of Teaching, UBC Computer Science</p></li>
<li><p>Option Co-Director, UBC Master of Data Science program</p></li>
<li><p>Background in machine learning</p></li>
</ul>
</div>
<div class="section" id="real-time-documents-10-min">
<h2>Real-time documents (10 min)<a class="headerlink" href="#real-time-documents-10-min" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Especially great for online teaching.</p></li>
<li><p>Here is a <a class="reference external" href="https://docs.google.com/document/d/1I8uHzqTXzm4KlAsupKCsO_adoXslX-fCvS4-DW-5yws/edit?usp=sharing">Google Doc</a> for today.</p></li>
<li><p>Let’s start by completing the Introductions and Activity 1.</p></li>
<li><p>This tool pairs well with Jupyter.</p>
<ul>
<li><p>For example, I had students create visualizations and screenshot them in the document.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="live-coding-in-jupyter-5-min">
<h2>Live coding in Jupyter (5 min)<a class="headerlink" href="#live-coding-in-jupyter-5-min" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>I’m a big fan of live experiments.</p></li>
<li><p>I don’t do much “live coding” but I do “live execution”.</p></li>
<li><p>You’ve probably seen a lot of this but here’s my version:</p></li>
</ul>
<div><img src="img/regularization_ppt.png" width="500"/></div>
<p><br><br>vs.<br><br></p>
<div><img src="img/regularization_ipynb.png" width="750"/></div><p>Main ideas:</p>
<ul class="simple">
<li><p>No “magic”.</p></li>
<li><p>Cultivates an atmosphere of experimentation.</p></li>
</ul>
</div>
<div class="section" id="problem-based-learning-20-min">
<h2>Problem-based learning (20 min)<a class="headerlink" href="#problem-based-learning-20-min" title="Permalink to this headline">¶</a></h2>
<p>My CPSC 340 syllabus:</p>
<ul class="simple">
<li><p>Day 1: Decision Trees</p></li>
<li><p>Day 2: <span class="math notranslate nohighlight">\(k\)</span>-nearest neighbours</p></li>
<li><p>etc.</p></li>
</ul>
<p>My CPSC 330 syllabus:</p>
<ul class="simple">
<li><p>Week 1: census dataset</p></li>
<li><p>Week 2: houseing dataset</p></li>
<li><p>etc.</p></li>
</ul>
<p>Jupyter facilitates this “problem-based learning” really well.</p>
<div class="section" id="example-canadian-cheese-dataset">
<h3>Example: Canadian cheese dataset<a class="headerlink" href="#example-canadian-cheese-dataset" title="Permalink to this headline">¶</a></h3>
<p>Below I will show a pretend lesson using the <a class="reference external" href="https://open.canada.ca/data/en/dataset/3c16cd48-3ac3-453f-8260-6f745181c83b">Canadian Cheese Directory dataset</a> from Agriculture and Agri-Food Canada. This data is distributed under the <a class="reference external" href="https://open.canada.ca/en/open-government-licence-canada">Canadian Open Government License</a> so I have bundled it with this Jupyterbook.</p>
<p>We will be predicting <code class="docutils literal notranslate"><span class="pre">FatContentPercent</span></code> based on the other features.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data/canadianCheeseDirectory.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>We will be predicting <code class="docutils literal notranslate"><span class="pre">FatContentPercent</span></code>, which is not available for all the cheeses, so I will first filter out those where this is not available:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;FatContentPercent&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df_train</span><span class="p">,</span> <span class="n">df_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">y_train</span> <span class="o">=</span> <span class="n">df_train</span><span class="p">[</span><span class="s1">&#39;FatContentPercent&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lm</span> <span class="o">=</span> <span class="n">Ridge</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># lm.fit(df_train, y_train)</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Now we run into our first error.</p></li>
<li><p>I like to leave these in.</p>
<ul>
<li><p>However, they cause problems when running all cells (or building a Jupyter Book?).</p></li>
<li><p>Fixing this issue seems to be <a class="reference external" href="https://github.com/jupyterlab/jupyterlab/issues/2412">in progress</a>.</p></li>
</ul>
</li>
<li><p>Not all the “problems” we encounter are Python errors.</p></li>
<li><p>Problem types:</p>
<ul>
<li><p>Python error</p></li>
<li><p>Poor model accuracy</p></li>
<li><p>Prohibitively slow code</p></li>
<li><p>Problems you didn’t know you had (the worst kind!), especially around train/test contamination</p></li>
<li><p>I don’t know where to start</p></li>
</ul>
</li>
</ul>
<p>Problem: non-numeric data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df_train</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CheeseNameEn</th>
      <th>CheeseNameFr</th>
      <th>ManufacturerNameEn</th>
      <th>ManufacturerNameFr</th>
      <th>ManufacturerProvCode</th>
      <th>ManufacturingTypeEn</th>
      <th>ManufacturingTypeFr</th>
      <th>WebSiteEn</th>
      <th>WebSiteFr</th>
      <th>FatContentPercent</th>
      <th>...</th>
      <th>Organic</th>
      <th>CategoryTypeEn</th>
      <th>CategoryTypeFr</th>
      <th>MilkTypeEn</th>
      <th>MilkTypeFr</th>
      <th>MilkTreatmentTypeEn</th>
      <th>MilkTreatmentTypeFr</th>
      <th>RindTypeEn</th>
      <th>RindTypeFr</th>
      <th>LastUpdateDate</th>
    </tr>
    <tr>
      <th>CheeseId</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1432</th>
      <td>NaN</td>
      <td>Chèvre des Alpes BIO</td>
      <td>Damafro</td>
      <td>Damafro</td>
      <td>QC</td>
      <td>Industrial</td>
      <td>Industrielle</td>
      <td>http://www.damafro.ca/en/home.html</td>
      <td>http://www.damafro.ca</td>
      <td>22.0</td>
      <td>...</td>
      <td>1</td>
      <td>Fresh Cheese</td>
      <td>Pâte fraîche</td>
      <td>Goat</td>
      <td>Chèvre</td>
      <td>Pasteurized</td>
      <td>Pasteurisé</td>
      <td>No Rind</td>
      <td>Sans croûte</td>
      <td>2016-02-03</td>
    </tr>
    <tr>
      <th>2281</th>
      <td>NaN</td>
      <td>Frère Chasseur (Le)</td>
      <td>NaN</td>
      <td>Fromagerie Au Gré des Champs</td>
      <td>QC</td>
      <td>Artisan</td>
      <td>Artisanale</td>
      <td>NaN</td>
      <td>http://www.augredeschamps.com</td>
      <td>35.0</td>
      <td>...</td>
      <td>1</td>
      <td>Firm Cheese</td>
      <td>Pâte ferme</td>
      <td>Cow</td>
      <td>Vache</td>
      <td>Raw Milk</td>
      <td>Lait cru</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2016-02-03</td>
    </tr>
    <tr>
      <th>1908</th>
      <td>NaN</td>
      <td>Mon précieux</td>
      <td>NaN</td>
      <td>Fromagerie Couland</td>
      <td>QC</td>
      <td>Artisan</td>
      <td>Artisanale</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>22.0</td>
      <td>...</td>
      <td>0</td>
      <td>Fresh Cheese</td>
      <td>Pâte fraîche</td>
      <td>Goat</td>
      <td>Chèvre</td>
      <td>Pasteurized</td>
      <td>Pasteurisé</td>
      <td>No Rind</td>
      <td>Sans croûte</td>
      <td>2016-02-03</td>
    </tr>
    <tr>
      <th>2224</th>
      <td>NaN</td>
      <td>Tomme de Brebis de Charlevoix</td>
      <td>NaN</td>
      <td>Maison d'affinage Maurice Dufour (La)</td>
      <td>QC</td>
      <td>Artisan</td>
      <td>Artisanale</td>
      <td>NaN</td>
      <td>http://www.fromagefin.com</td>
      <td>33.0</td>
      <td>...</td>
      <td>0</td>
      <td>Firm Cheese</td>
      <td>Pâte ferme</td>
      <td>Ewe</td>
      <td>Brebis</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Washed Rind</td>
      <td>Croûte lavée</td>
      <td>2016-02-03</td>
    </tr>
    <tr>
      <th>2007</th>
      <td>NaN</td>
      <td>Cheddar Littoral</td>
      <td>NaN</td>
      <td>Fromagerie Ferme du littoral</td>
      <td>QC</td>
      <td>Farmstead</td>
      <td>Fermière</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>30.0</td>
      <td>...</td>
      <td>0</td>
      <td>Firm Cheese</td>
      <td>Pâte ferme</td>
      <td>Cow</td>
      <td>Vache</td>
      <td>Pasteurized</td>
      <td>Pasteurisé</td>
      <td>No Rind</td>
      <td>Sans croûte</td>
      <td>2016-02-03</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 29 columns</p>
</div></div></div>
</div>
<p>Now perhaps the lesson goes to encoding categorical variables…</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;ManufacturerName&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;ManufacturerNameEn&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;ManufacturerNameFr&quot;</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;ManufacturerNameEn&quot;</span><span class="p">,</span> <span class="s2">&quot;ManufacturerNameFr&quot;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;CheeseName&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;CheeseNameEn&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;CheeseNameFr&quot;</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;CheeseNameEn&quot;</span><span class="p">,</span> <span class="s2">&quot;CheeseNameFr&quot;</span><span class="p">])</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;Fr&quot;</span><span class="p">)])</span>
<span class="n">df_train</span><span class="p">,</span> <span class="n">df_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">numeric_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;MoisturePercent&#39;</span><span class="p">]</span>
<span class="n">categorical_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ManufacturerProvCode&#39;</span><span class="p">,</span> <span class="s1">&#39;ManufacturingTypeEn&#39;</span><span class="p">,</span> <span class="s1">&#39;Organic&#39;</span><span class="p">,</span> <span class="s1">&#39;CategoryTypeEn&#39;</span><span class="p">,</span> <span class="s1">&#39;MilkTypeEn&#39;</span><span class="p">,</span> <span class="s1">&#39;MilkTreatmentTypeEn&#39;</span><span class="p">,</span> <span class="s1">&#39;RindTypeEn&#39;</span><span class="p">,</span> <span class="s1">&#39;ManufacturerName&#39;</span><span class="p">]</span>
<span class="n">text_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CheeseName&#39;</span><span class="p">,</span> <span class="s1">&#39;FlavourEn&#39;</span><span class="p">,</span> <span class="s1">&#39;CharacteristicsEn&#39;</span><span class="p">]</span>
<span class="n">drop_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;WebSiteEn&#39;</span><span class="p">,</span> <span class="s1">&#39;ParticularitiesEn&#39;</span><span class="p">,</span> <span class="s1">&#39;RipeningEn&#39;</span><span class="p">,</span> <span class="s1">&#39;LastUpdateDate&#39;</span><span class="p">]</span>
<span class="n">target_column</span> <span class="o">=</span> <span class="s1">&#39;FatContentPercent&#39;</span>
<span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="n">numeric_features</span> <span class="o">+</span> <span class="n">categorical_features</span> <span class="o">+</span> <span class="n">text_features</span> <span class="o">+</span> <span class="n">drop_features</span> <span class="o">+</span> <span class="p">[</span><span class="n">target_column</span><span class="p">])</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">df_train</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">y_train</span> <span class="o">=</span> <span class="n">df_train</span><span class="p">[</span><span class="n">target_column</span><span class="p">]</span>
<span class="n">y_test</span> <span class="o">=</span> <span class="n">df_test</span><span class="p">[</span><span class="n">target_column</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Note how I’ve minimized some of the code cells.</p></li>
<li><p>In class, I would show more of them.</p></li>
<li><p>But not necessarily all, if they are beyond the scope, not relevant, or old news.</p></li>
</ul>
<p>Now to the key code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">numeric_transformer</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;imputer&#39;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;median&#39;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;scaler&#39;</span><span class="p">,</span> <span class="n">StandardScaler</span><span class="p">())</span>
<span class="p">])</span>

<span class="n">categorical_transformer</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;imputer&#39;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;onehot&#39;</span><span class="p">,</span> <span class="n">OneHotEncoder</span><span class="p">(</span><span class="n">sparse</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="p">])</span>

<span class="c1"># Fit a separate CountVectorizer for each of the text columns.</span>
<span class="c1"># Need to convert the resulting sparse matrices to dense separately.</span>
<span class="n">text_transformer</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;imputer&#39;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;constant&#39;</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;tolist&#39;</span><span class="p">,</span> <span class="n">FunctionTransformer</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;countvec&#39;</span><span class="p">,</span> <span class="n">CountVectorizer</span><span class="p">(</span><span class="n">max_features</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">stop_words</span><span class="o">=</span><span class="s1">&#39;english&#39;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;todense&#39;</span><span class="p">,</span> <span class="n">FunctionTransformer</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">toarray</span><span class="p">(),</span> <span class="n">validate</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="p">])</span>

<span class="n">preprocessor</span> <span class="o">=</span> <span class="n">ColumnTransformer</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;numeric&#39;</span><span class="p">,</span> <span class="n">numeric_transformer</span><span class="p">,</span> <span class="n">numeric_features</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;categorical&#39;</span><span class="p">,</span> <span class="n">categorical_transformer</span><span class="p">,</span> <span class="n">categorical_features</span><span class="p">)</span>
<span class="p">]</span> <span class="o">+</span> <span class="p">[(</span><span class="n">f</span><span class="p">,</span> <span class="n">text_transformer</span><span class="p">,</span> <span class="p">[</span><span class="n">f</span><span class="p">])</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">text_features</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">preprocessor</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df_train</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_column_names</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Gets the feature names from a preprocessor.</span>
<span class="sd">    This entails looking at the OHE feature names and also</span>
<span class="sd">    the words used by the CountVectorizers.</span>
<span class="sd">    </span>
<span class="sd">    Arguments</span>
<span class="sd">    ---------</span>
<span class="sd">    preprocessor: ColumnTransformer</span>
<span class="sd">        A fit preprocessor following the specific format above.</span>
<span class="sd">    </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list</span>
<span class="sd">        A list of column names.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ohe_feature_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">preprocessor</span><span class="o">.</span><span class="n">named_transformers_</span><span class="p">[</span><span class="s1">&#39;categorical&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">named_steps</span><span class="p">[</span><span class="s1">&#39;onehot&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_feature_names</span><span class="p">(</span><span class="n">categorical_features</span><span class="p">))</span>
    <span class="n">text_feature_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="n">word</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">text_features</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">preprocessor</span><span class="o">.</span><span class="n">named_transformers_</span><span class="p">[</span><span class="n">f</span><span class="p">]</span><span class="o">.</span><span class="n">named_steps</span><span class="p">[</span><span class="s1">&#39;countvec&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get_feature_names</span><span class="p">()]</span>
    <span class="k">return</span> <span class="n">numeric_features</span> <span class="o">+</span> <span class="n">ohe_feature_names</span> <span class="o">+</span> <span class="n">text_feature_names</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">new_columns</span> <span class="o">=</span> <span class="n">get_column_names</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">)</span>
    
<span class="n">df_train_enc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">preprocessor</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df_train</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="n">df_train</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">new_columns</span><span class="p">)</span>
<span class="n">df_train_enc</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>MoisturePercent</th>
      <th>ManufacturerProvCode_AB</th>
      <th>ManufacturerProvCode_BC</th>
      <th>ManufacturerProvCode_MB</th>
      <th>ManufacturerProvCode_NB</th>
      <th>ManufacturerProvCode_NL</th>
      <th>ManufacturerProvCode_NS</th>
      <th>ManufacturerProvCode_ON</th>
      <th>ManufacturerProvCode_PE</th>
      <th>ManufacturerProvCode_QC</th>
      <th>...</th>
      <th>CharacteristicsEn_cheese</th>
      <th>CharacteristicsEn_colored</th>
      <th>CharacteristicsEn_creamy</th>
      <th>CharacteristicsEn_interior</th>
      <th>CharacteristicsEn_pressed</th>
      <th>CharacteristicsEn_rind</th>
      <th>CharacteristicsEn_ripened</th>
      <th>CharacteristicsEn_smooth</th>
      <th>CharacteristicsEn_texture</th>
      <th>CharacteristicsEn_white</th>
    </tr>
    <tr>
      <th>CheeseId</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1432</th>
      <td>1.127656</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2281</th>
      <td>-1.459684</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1908</th>
      <td>2.266086</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2224</th>
      <td>-1.459684</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2007</th>
      <td>-0.528242</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 224 columns</p>
</div></div></div>
</div>
<ul class="simple">
<li><p>Awesome, we’ve got everything into numeric data!</p></li>
<li><p>Now let’s train a model:</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pipeline_dummy</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;preprocessor&#39;</span><span class="p">,</span> <span class="n">preprocessor</span><span class="p">),</span>
    <span class="p">(</span><span class="s1">&#39;model&#39;</span><span class="p">,</span> <span class="n">DummyRegressor</span><span class="p">())])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># scores_dummy = cross_validate(pipeline_dummy, df_train, y_train, cv=5, return_train_score=True)</span>
<span class="c1"># pd.DataFrame(scores_dummy)[[&quot;train_score&quot;, &quot;test_score&quot;]].mean()</span>
</pre></div>
</div>
</div>
</div>
<p>Oh no, another error - what is going on this time? Etc.</p>
<p>Going back to the problem types:</p>
<ul class="simple">
<li><p>Python error</p></li>
<li><p>Poor model accuracy</p></li>
<li><p>Prohibitively slow code</p></li>
<li><p>Problems you didn’t know you had (the worst kind!), especially around train/test contamination</p></li>
</ul>
<p>Most of the topics / learning outcomes in the course fit into one of these categories.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Topic</p></th>
<th class="head"><p>Problem</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>One-hot encoding</p></td>
<td><p>Python error</p></td>
</tr>
<tr class="row-odd"><td><p>Overfitting</p></td>
<td><p>Poor model accuracy</p></td>
</tr>
<tr class="row-even"><td><p>Fancy models, e.g. CatBoost</p></td>
<td><p>Poor model accuracy</p></td>
</tr>
<tr class="row-odd"><td><p>Feature importances, e.g. SHAP</p></td>
<td><p>Lack of interpretability</p></td>
</tr>
<tr class="row-even"><td><p>Pipelines</p></td>
<td><p>Problems you didn’t know you had, hard-to-maintain code</p></td>
</tr>
<tr class="row-odd"><td><p>Cross-validation</p></td>
<td><p>Poor model accuracy, problems you didn’t know you had</p></td>
</tr>
<tr class="row-even"><td><p>Survival analysis</p></td>
<td><p>Problems you didn’t know you had</p></td>
</tr>
<tr class="row-odd"><td><p>Pre-trained deep networks</p></td>
<td><p>Don’t know where to start</p></td>
</tr>
</tbody>
</table>
<p>etc.</p>
</div>
</div>
<div class="section" id="another-quick-activity-before-the-break">
<h2>Another quick activity before the break<a class="headerlink" href="#another-quick-activity-before-the-break" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Let’s generate a dataset for another supervised learning problem: predicting whether someone has seen the movie <em>The Lion King</em>.</p></li>
<li><p>Let’s head back to the <a class="reference external" href="https://docs.google.com/document/d/1I8uHzqTXzm4KlAsupKCsO_adoXslX-fCvS4-DW-5yws/edit?usp=sharing">Google Doc</a>.</p></li>
</ul>
</div>
<div class="section" id="break-5-10-min">
<h2>Break (5-10 min)<a class="headerlink" href="#break-5-10-min" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="sample-activity-decision-trees-20-min">
<h2>Sample activity: decision trees (20 min)<a class="headerlink" href="#sample-activity-decision-trees-20-min" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Basic idea: ask a bunch of yes/no questions until you end up at a prediction.</p></li>
<li><p>E.g.</p>
<ul>
<li><p>If you are scared of lions, predict “No”</p></li>
<li><p>Otherwise, if you’ve seen a movie in the last 2 weeks, predict “Yes”</p></li>
<li><p>Otherwise, if you’d pay &gt; \$5 for a movie, predict “Yes”</p></li>
<li><p>Otherwise, predict “No”</p></li>
</ul>
</li>
</ul>
<ul class="simple">
<li><p>This “series of questions” approach can be drawn as a tree:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>            Are you scared of lions?
            /          \
           / True       \  False
          /              \
         No           Have you seen a movie in the last 2 weeks?
                        /      \
                  True /        \ False
                      /          \ 
                    Yes         Would you pay more than $5 for a movie?  
                                 /           \
                                / True        \ False
                               /               \
                              Yes              No
</pre></div>
</div>
<ul class="simple">
<li><p>The decision tree algorithm automatically learns a tree like this, based on the data set!</p>
<ul>
<li><p>We don’t have time to go through how the algorithm works.</p></li>
<li><p>But it’s worth noting that it support two types of inputs:</p></li>
</ul>
</li>
</ul>
<ol class="simple">
<li><p>Categorical (e.g., Yes/No or more options)</p></li>
<li><p>Numeric (a number)</p></li>
</ol>
<p>In the numeric case, the decision tree algorithm also picks the <em>threshold</em> (\$5 in this case)</p>
<ul class="simple">
<li><p>Let’s apply a decision tree to our <em>The Lion King</em> dataset.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lion_king</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;data/lionking_test.csv&quot;</span><span class="p">)</span>
<span class="n">lion_king</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Are you scared of lions?</th>
      <th>Have you watched a movie in the last 2 weeks?</th>
      <th>How much would you pay to see a good movie? (in $)</th>
      <th>Have you seen the movie The Lion King?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>No</td>
      <td>No</td>
      <td>10</td>
      <td>Yes</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Yes</td>
      <td>Yes</td>
      <td>10</td>
      <td>Yes</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Yes</td>
      <td>No</td>
      <td>10</td>
      <td>No</td>
    </tr>
    <tr>
      <th>3</th>
      <td>No</td>
      <td>No</td>
      <td>0</td>
      <td>No</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lion_king</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">lion_king</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">lion_king</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="n">lion_king</span><span class="o">.</span><span class="n">columns</span><span class="p">[:</span><span class="mi">2</span><span class="p">]]</span> <span class="o">==</span> <span class="s2">&quot;No&quot;</span>
<span class="c1"># Note on the above: Encoding &quot;No&quot; as 1 and &quot;Yes&quot; as 0 because sklearn uses &lt;= 0.5; this makes the tree diagrams more readable.</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tree</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">display_tree</span><span class="p">(</span><span class="n">lion_king</span><span class="p">,</span> <span class="n">tree</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/backend.py</span> in <span class="ni">run</span><span class="nt">(cmd, input, capture_output, check, encoding, quiet, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">163</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">164</span>         <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">startupinfo</span><span class="o">=</span><span class="n">get_startupinfo</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">165</span>     <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/subprocess.py</span> in <span class="ni">__init__</span><span class="nt">(self, args, bufsize, executable, stdin, stdout, stderr, preexec_fn, close_fds, shell, cwd, env, universal_newlines, startupinfo, creationflags, restore_signals, start_new_session, pass_fds, encoding, errors, text)</span>
<span class="g g-Whitespace">    </span><span class="mi">799</span>                                 <span class="n">errread</span><span class="p">,</span> <span class="n">errwrite</span><span class="p">,</span>
<span class="ne">--&gt; </span><span class="mi">800</span>                                 <span class="n">restore_signals</span><span class="p">,</span> <span class="n">start_new_session</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">801</span>         <span class="k">except</span><span class="p">:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/subprocess.py</span> in <span class="ni">_execute_child</span><span class="nt">(self, args, executable, preexec_fn, close_fds, pass_fds, cwd, env, startupinfo, creationflags, shell, p2cread, p2cwrite, c2pread, c2pwrite, errread, errwrite, restore_signals, start_new_session)</span>
<span class="g g-Whitespace">   </span><span class="mi">1550</span>                             <span class="n">err_msg</span> <span class="o">+=</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">err_filename</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1551</span>                     <span class="k">raise</span> <span class="n">child_exception_type</span><span class="p">(</span><span class="n">errno_num</span><span class="p">,</span> <span class="n">err_msg</span><span class="p">,</span> <span class="n">err_filename</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1552</span>                 <span class="k">raise</span> <span class="n">child_exception_type</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;dot&#39;: &#39;dot&#39;

<span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>

<span class="ne">ExecutableNotFound</span><span class="g g-Whitespace">                        </span>Traceback (most recent call last)
<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/IPython/core/formatters.py</span> in <span class="ni">__call__</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">343</span>             <span class="n">method</span> <span class="o">=</span> <span class="n">get_real_method</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">print_method</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">344</span>             <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">345</span>                 <span class="k">return</span> <span class="n">method</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">346</span>             <span class="k">return</span> <span class="kc">None</span>
<span class="g g-Whitespace">    </span><span class="mi">347</span>         <span class="k">else</span><span class="p">:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/files.py</span> in <span class="ni">_repr_svg_</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">111</span> 
<span class="g g-Whitespace">    </span><span class="mi">112</span>     <span class="k">def</span> <span class="nf">_repr_svg_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">113</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;svg&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_encoding</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">114</span> 
<span class="g g-Whitespace">    </span><span class="mi">115</span>     <span class="k">def</span> <span class="nf">pipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/files.py</span> in <span class="ni">pipe</span><span class="nt">(self, format, renderer, formatter, quiet)</span>
<span class="g g-Whitespace">    </span><span class="mi">136</span>         <span class="n">out</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_engine</span><span class="p">,</span> <span class="nb">format</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">137</span>                            <span class="n">renderer</span><span class="o">=</span><span class="n">renderer</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="n">formatter</span><span class="p">,</span>
<span class="ne">--&gt; </span><span class="mi">138</span>                            <span class="n">quiet</span><span class="o">=</span><span class="n">quiet</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">139</span> 
<span class="g g-Whitespace">    </span><span class="mi">140</span>         <span class="k">return</span> <span class="n">out</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/backend.py</span> in <span class="ni">pipe</span><span class="nt">(engine, format, data, renderer, formatter, quiet)</span>
<span class="g g-Whitespace">    </span><span class="mi">242</span>     <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">243</span><span class="s2">     cmd, _ = command(engine, format, None, renderer, formatter)</span>
<span class="ne">--&gt; </span><span class="mi">244</span><span class="s2">     out, _ = run(cmd, input=data, capture_output=True, check=True, quiet=quiet)</span>
<span class="g g-Whitespace">    </span><span class="mi">245</span><span class="s2">     return out</span>
<span class="g g-Whitespace">    </span><span class="mi">246</span><span class="s2"> </span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/backend.py</span> in <span class="ni">run</span><span class="nt">(cmd, input, capture_output, check, encoding, quiet, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">165</span><span class="s2">     except OSError as e:</span>
<span class="g g-Whitespace">    </span><span class="mi">166</span><span class="s2">         if e.errno == errno.ENOENT:</span>
<span class="ne">--&gt; </span><span class="mi">167</span><span class="s2">             raise ExecutableNotFound(cmd)</span>
<span class="g g-Whitespace">    </span><span class="mi">168</span><span class="s2">         else:</span>
<span class="g g-Whitespace">    </span><span class="mi">169</span><span class="s2">             raise</span>

<span class="ne">ExecutableNotFound</span>: failed to execute [&#39;dot&#39;, &#39;-Tsvg&#39;], make sure the Graphviz executables are on your systems&#39; PATH
</pre></div>
</div>
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;graphviz.files.Source at 0x7f7c530ed710&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>No     2
Yes    2
Name: Have you seen the movie The Lion King?, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">21</span><span class="o">/</span><span class="mi">30</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0.7
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tree</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>0.75
</pre></div>
</div>
</div>
</div>
<p>Now, let’s make this more interesting by increasing the <strong>depth</strong> of the tree.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tree2</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">display_tree</span><span class="p">(</span><span class="n">lion_king</span><span class="p">,</span> <span class="n">tree2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/backend.py</span> in <span class="ni">run</span><span class="nt">(cmd, input, capture_output, check, encoding, quiet, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">163</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">164</span>         <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">startupinfo</span><span class="o">=</span><span class="n">get_startupinfo</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">165</span>     <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/subprocess.py</span> in <span class="ni">__init__</span><span class="nt">(self, args, bufsize, executable, stdin, stdout, stderr, preexec_fn, close_fds, shell, cwd, env, universal_newlines, startupinfo, creationflags, restore_signals, start_new_session, pass_fds, encoding, errors, text)</span>
<span class="g g-Whitespace">    </span><span class="mi">799</span>                                 <span class="n">errread</span><span class="p">,</span> <span class="n">errwrite</span><span class="p">,</span>
<span class="ne">--&gt; </span><span class="mi">800</span>                                 <span class="n">restore_signals</span><span class="p">,</span> <span class="n">start_new_session</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">801</span>         <span class="k">except</span><span class="p">:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/subprocess.py</span> in <span class="ni">_execute_child</span><span class="nt">(self, args, executable, preexec_fn, close_fds, pass_fds, cwd, env, startupinfo, creationflags, shell, p2cread, p2cwrite, c2pread, c2pwrite, errread, errwrite, restore_signals, start_new_session)</span>
<span class="g g-Whitespace">   </span><span class="mi">1550</span>                             <span class="n">err_msg</span> <span class="o">+=</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">err_filename</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1551</span>                     <span class="k">raise</span> <span class="n">child_exception_type</span><span class="p">(</span><span class="n">errno_num</span><span class="p">,</span> <span class="n">err_msg</span><span class="p">,</span> <span class="n">err_filename</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1552</span>                 <span class="k">raise</span> <span class="n">child_exception_type</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;dot&#39;: &#39;dot&#39;

<span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>

<span class="ne">ExecutableNotFound</span><span class="g g-Whitespace">                        </span>Traceback (most recent call last)
<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/IPython/core/formatters.py</span> in <span class="ni">__call__</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">343</span>             <span class="n">method</span> <span class="o">=</span> <span class="n">get_real_method</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">print_method</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">344</span>             <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">345</span>                 <span class="k">return</span> <span class="n">method</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">346</span>             <span class="k">return</span> <span class="kc">None</span>
<span class="g g-Whitespace">    </span><span class="mi">347</span>         <span class="k">else</span><span class="p">:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/files.py</span> in <span class="ni">_repr_svg_</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">111</span> 
<span class="g g-Whitespace">    </span><span class="mi">112</span>     <span class="k">def</span> <span class="nf">_repr_svg_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">113</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;svg&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_encoding</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">114</span> 
<span class="g g-Whitespace">    </span><span class="mi">115</span>     <span class="k">def</span> <span class="nf">pipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/files.py</span> in <span class="ni">pipe</span><span class="nt">(self, format, renderer, formatter, quiet)</span>
<span class="g g-Whitespace">    </span><span class="mi">136</span>         <span class="n">out</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_engine</span><span class="p">,</span> <span class="nb">format</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">137</span>                            <span class="n">renderer</span><span class="o">=</span><span class="n">renderer</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="n">formatter</span><span class="p">,</span>
<span class="ne">--&gt; </span><span class="mi">138</span>                            <span class="n">quiet</span><span class="o">=</span><span class="n">quiet</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">139</span> 
<span class="g g-Whitespace">    </span><span class="mi">140</span>         <span class="k">return</span> <span class="n">out</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/backend.py</span> in <span class="ni">pipe</span><span class="nt">(engine, format, data, renderer, formatter, quiet)</span>
<span class="g g-Whitespace">    </span><span class="mi">242</span>     <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">243</span><span class="s2">     cmd, _ = command(engine, format, None, renderer, formatter)</span>
<span class="ne">--&gt; </span><span class="mi">244</span><span class="s2">     out, _ = run(cmd, input=data, capture_output=True, check=True, quiet=quiet)</span>
<span class="g g-Whitespace">    </span><span class="mi">245</span><span class="s2">     return out</span>
<span class="g g-Whitespace">    </span><span class="mi">246</span><span class="s2"> </span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/backend.py</span> in <span class="ni">run</span><span class="nt">(cmd, input, capture_output, check, encoding, quiet, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">165</span><span class="s2">     except OSError as e:</span>
<span class="g g-Whitespace">    </span><span class="mi">166</span><span class="s2">         if e.errno == errno.ENOENT:</span>
<span class="ne">--&gt; </span><span class="mi">167</span><span class="s2">             raise ExecutableNotFound(cmd)</span>
<span class="g g-Whitespace">    </span><span class="mi">168</span><span class="s2">         else:</span>
<span class="g g-Whitespace">    </span><span class="mi">169</span><span class="s2">             raise</span>

<span class="ne">ExecutableNotFound</span>: failed to execute [&#39;dot&#39;, &#39;-Tsvg&#39;], make sure the Graphviz executables are on your systems&#39; PATH
</pre></div>
</div>
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;graphviz.files.Source at 0x7f7c50d999d0&gt;
</pre></div>
</div>
</div>
</div>
<p>Please ignore the <code class="docutils literal notranslate"><span class="pre">&lt;=</span> <span class="pre">0.5</span></code> above, it’s a detail we don’t need to get into here.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tree2</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>1.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tree_max</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tree_max</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">lion_king</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>1.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">display_tree</span><span class="p">(</span><span class="n">lion_king</span><span class="p">,</span> <span class="n">tree_max</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/backend.py</span> in <span class="ni">run</span><span class="nt">(cmd, input, capture_output, check, encoding, quiet, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">163</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">164</span>         <span class="n">proc</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="n">startupinfo</span><span class="o">=</span><span class="n">get_startupinfo</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">165</span>     <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/subprocess.py</span> in <span class="ni">__init__</span><span class="nt">(self, args, bufsize, executable, stdin, stdout, stderr, preexec_fn, close_fds, shell, cwd, env, universal_newlines, startupinfo, creationflags, restore_signals, start_new_session, pass_fds, encoding, errors, text)</span>
<span class="g g-Whitespace">    </span><span class="mi">799</span>                                 <span class="n">errread</span><span class="p">,</span> <span class="n">errwrite</span><span class="p">,</span>
<span class="ne">--&gt; </span><span class="mi">800</span>                                 <span class="n">restore_signals</span><span class="p">,</span> <span class="n">start_new_session</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">801</span>         <span class="k">except</span><span class="p">:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/subprocess.py</span> in <span class="ni">_execute_child</span><span class="nt">(self, args, executable, preexec_fn, close_fds, pass_fds, cwd, env, startupinfo, creationflags, shell, p2cread, p2cwrite, c2pread, c2pwrite, errread, errwrite, restore_signals, start_new_session)</span>
<span class="g g-Whitespace">   </span><span class="mi">1550</span>                             <span class="n">err_msg</span> <span class="o">+=</span> <span class="s1">&#39;: &#39;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">err_filename</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1551</span>                     <span class="k">raise</span> <span class="n">child_exception_type</span><span class="p">(</span><span class="n">errno_num</span><span class="p">,</span> <span class="n">err_msg</span><span class="p">,</span> <span class="n">err_filename</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1552</span>                 <span class="k">raise</span> <span class="n">child_exception_type</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;dot&#39;: &#39;dot&#39;

<span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>

<span class="ne">ExecutableNotFound</span><span class="g g-Whitespace">                        </span>Traceback (most recent call last)
<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/IPython/core/formatters.py</span> in <span class="ni">__call__</span><span class="nt">(self, obj)</span>
<span class="g g-Whitespace">    </span><span class="mi">343</span>             <span class="n">method</span> <span class="o">=</span> <span class="n">get_real_method</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">print_method</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">344</span>             <span class="k">if</span> <span class="n">method</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">345</span>                 <span class="k">return</span> <span class="n">method</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">346</span>             <span class="k">return</span> <span class="kc">None</span>
<span class="g g-Whitespace">    </span><span class="mi">347</span>         <span class="k">else</span><span class="p">:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/files.py</span> in <span class="ni">_repr_svg_</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">111</span> 
<span class="g g-Whitespace">    </span><span class="mi">112</span>     <span class="k">def</span> <span class="nf">_repr_svg_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">113</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;svg&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_encoding</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">114</span> 
<span class="g g-Whitespace">    </span><span class="mi">115</span>     <span class="k">def</span> <span class="nf">pipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">renderer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/files.py</span> in <span class="ni">pipe</span><span class="nt">(self, format, renderer, formatter, quiet)</span>
<span class="g g-Whitespace">    </span><span class="mi">136</span>         <span class="n">out</span> <span class="o">=</span> <span class="n">backend</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_engine</span><span class="p">,</span> <span class="nb">format</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">137</span>                            <span class="n">renderer</span><span class="o">=</span><span class="n">renderer</span><span class="p">,</span> <span class="n">formatter</span><span class="o">=</span><span class="n">formatter</span><span class="p">,</span>
<span class="ne">--&gt; </span><span class="mi">138</span>                            <span class="n">quiet</span><span class="o">=</span><span class="n">quiet</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">139</span> 
<span class="g g-Whitespace">    </span><span class="mi">140</span>         <span class="k">return</span> <span class="n">out</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/backend.py</span> in <span class="ni">pipe</span><span class="nt">(engine, format, data, renderer, formatter, quiet)</span>
<span class="g g-Whitespace">    </span><span class="mi">242</span>     <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">243</span><span class="s2">     cmd, _ = command(engine, format, None, renderer, formatter)</span>
<span class="ne">--&gt; </span><span class="mi">244</span><span class="s2">     out, _ = run(cmd, input=data, capture_output=True, check=True, quiet=quiet)</span>
<span class="g g-Whitespace">    </span><span class="mi">245</span><span class="s2">     return out</span>
<span class="g g-Whitespace">    </span><span class="mi">246</span><span class="s2"> </span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.8/x64/lib/python3.7/site-packages/graphviz/backend.py</span> in <span class="ni">run</span><span class="nt">(cmd, input, capture_output, check, encoding, quiet, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">165</span><span class="s2">     except OSError as e:</span>
<span class="g g-Whitespace">    </span><span class="mi">166</span><span class="s2">         if e.errno == errno.ENOENT:</span>
<span class="ne">--&gt; </span><span class="mi">167</span><span class="s2">             raise ExecutableNotFound(cmd)</span>
<span class="g g-Whitespace">    </span><span class="mi">168</span><span class="s2">         else:</span>
<span class="g g-Whitespace">    </span><span class="mi">169</span><span class="s2">             raise</span>

<span class="ne">ExecutableNotFound</span>: failed to execute [&#39;dot&#39;, &#39;-Tsvg&#39;], make sure the Graphviz executables are on your systems&#39; PATH
</pre></div>
</div>
<div class="output text_plain highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;graphviz.files.Source at 0x7f7c50d9f2d0&gt;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="think-pair-share-5-10-min-time-permitting">
<h2>Think-pair-share (5-10 min, time permitting)<a class="headerlink" href="#think-pair-share-5-10-min-time-permitting" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Think-pair-share is an evidence-based teaching approach.</p></li>
<li><p>The idea is for students to learn from each other.</p></li>
<li><p>I find it works great in DS teaching.</p></li>
<li><p>Example:</p></li>
</ul>
<div class="section" id="cross-validation-true-false-questions">
<h3>Cross-validation true/false questions<a class="headerlink" href="#cross-validation-true-false-questions" title="Permalink to this headline">¶</a></h3>
<ol class="simple">
<li><p><span class="math notranslate nohighlight">\(k\)</span>-fold cross validation calls <code class="docutils literal notranslate"><span class="pre">fit</span></code> <span class="math notranslate nohighlight">\(k\)</span> times and <code class="docutils literal notranslate"><span class="pre">predict</span></code> <span class="math notranslate nohighlight">\(k\)</span> times.</p></li>
<li><p>The goal of cross-validation is to obtain a better estimate of test error than just using a single validation set.</p></li>
<li><p>The main disadvantage of using a large <span class="math notranslate nohighlight">\(k\)</span> in cross-validation is running time.</p></li>
<li><p><span class="math notranslate nohighlight">\(2\)</span>-fold cross validation is the same thing as using a validation set that’s 50% the size of your training set.</p></li>
</ol>
<p>I would usually allocate 10-15 min for the above.</p>
<p>Details on my approach:</p>
<ul class="simple">
<li><p>Easier to come up with answers because not limited to 1 True, 3-4 False</p></li>
<li><p>Can use hand-raising</p></li>
<li><p>Gives more flexibility to have ambiguous questions without messing up the rest</p></li>
<li><p>Try to make one of the earlier ones true (1 or 2), in general slightly more true, since this encourages participation.</p></li>
<li><p>“My answer” instead of “the answer”</p></li>
<li><p>Often, when the majority disagreed with me, we discovered an ambiguity or catch</p></li>
<li><p>I don’t write down answers</p></li>
</ul>
</div>
</div>
<div class="section" id="q-a-15-min">
<h2>Q&amp;A (15 min)<a class="headerlink" href="#q-a-15-min" title="Permalink to this headline">¶</a></h2>
</div>
</div>


              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="../lee/teaching_online_jupyter_days.html" title="previous page">Teaching in an online setting</a>
    <a class='right-next' id="next-link" href="../wu/Jupyter_and_QuantEcon.html" title="next page">Jupyter and QuantEcon</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Tomas Beuzen, Hayley Boyce, Warren Code, Tiffany Timbers, Patrick Walls, Peifan Wu<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../../_static/js/index.js"></script>
    
  </body>
</html>